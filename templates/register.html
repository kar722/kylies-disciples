<!DOCTYPE html>
{% extends "layouts/base.html" %}
<html lang="en">
<meta charset="UTF-8">
{% set project = "Login" %}
{% block body %}

    <div class="container">
        <br>
        <h4 style="color: white">Enter your Email and Password:</h4>
        <br>
        <form id="login">
            <br />
            <input
                    style="text-align: center"
                    type="text"
                    id="email"
                    name="email"
                    placeholder="Email"
                    class="form-control"
            />
            <br />
            <input
                    style="text-align: center"
                    type="password"
                    id="password"
                    name="password"
                    placeholder="Password"
                    class="form-control"
            />
            <br />
            <input
                    style="text-align: center"
                    class="btn btn-primary loginbtn"
                    type="submit"
                    value="Login"
            />
        </form>
        <input
                style="text-align: center;"
                class="btn btn-primary loginbtn"
                type="submit"
                onclick="register()"
                value="Sign up"
        />
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.14.1/firebase-firestore.js"></script>
        <script>
            const firebaseConfig = {
                apiKey: "AIzaSyDlLyw_zNfech3CumwNxqct4EPhTT6oqHo",
                authDomain: "hackers-8d876.firebaseapp.com",
                projectId: "hackers-8d876",
                storageBucket: "hackers-8d876.appspot.com",
                messagingSenderId: "337033111635",
                appId: "1:337033111635:web:e47fc64f0fc5528a38bea6",
                measurementId: "G-RSNZWY27F3"
            };
            if (firebase.apps.length === 0) {
                firebase.initializeApp(config);
            }
            const auth = firebase.auth();
            var form = document.getElementById("login");
            var submit = document.getElementById("submit");

            form.onsubmit = function (e) {
                e.preventDefault();
                const email = form["email"].value;
                const password = form["password"].value;
                auth.signInWithEmailAndPassword(email, password).then(function (){
                    window.location.pathname = '/'
                }).catch((err) => {
                    if (err.code === "auth/user-not-found") {
                        window.location.pathname = "/login/"
                    } else if (err.code === "auth/invalid-email") {
                        window.location.pathname = "/login/"
                    } else {
                        alert(err.code);
                    }
                });
            };
            function register() {
                window.location.pathname = "/register/"
            }
        </script>
    </div>
{% endblock %}
<!- This is turning off birds background from base.html -->
{% block background %}
{% endblock %}
</html>